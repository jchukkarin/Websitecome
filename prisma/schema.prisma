generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model User {
  id        Int      @id @default(autoincrement())
  name      String
  email     String   @unique
  password  String
  createdAt DateTime @default(now())
}

model Consignment {
  id            String             @id @default(uuid())
  date          DateTime
  lot           String
  consignorName String
  contactNumber String
  address       String
  totalPrice    Float
  type          String             @default("INCOME")
  createdAt     DateTime           @default(now())
  images        ConsignmentImage[]
  items         ConsignmentItem[]
}

model ConsignmentImage {
  id            String      @id @default(uuid())
  imageUrl      String
  consignmentId String
  consignment   Consignment @relation(fields: [consignmentId], references: [id])
}

model ConsignmentItem {
  id             String      @id @default(uuid())
  productName    String
  category       String
  year           String
  status         String
  confirmedPrice Float
  salesChannel   String
  imageUrl       String?
  consignmentId  String
  consignment    Consignment @relation(fields: [consignmentId], references: [id])
}

model ShopProfile {
  id          String   @id @default("default")
  shopName    String   @default("Naitounai")
  address     String   @default("-")
  subDistrict String   @default("-")
  district    String   @default("-")
  province    String   @default("-")
  zipCode     String   @default("-")
  line        String?
  shopee      String?
  facebook    String?
  phone       String?
  updatedAt   DateTime @updatedAt
}


model ImportStatus {
  id        Int       @id @default(autoincrement())
  name      String
  products  Product[]

  createdAt DateTime  @default(now())
}


model Product {
  id              Int           @id @default(autoincrement())
  name            String

  // สถานะนำเข้า
  importStatusId  Int
  importStatus    ImportStatus  @relation(fields: [importStatusId], references: [id])

  // สถานะการเบิกจ่าย
  payoutStatusId  Int?
  payoutStatus    PayoutStatus? @relation(fields: [payoutStatusId], references: [id])

  // สถานะขายจริง
  isSold          Boolean       @default(false)
  soldAt          DateTime?

  createdAt       DateTime      @default(now())
}

model PayoutStatus {
  id        Int       @id @default(autoincrement())
  name      String
  products  Product[]
  createdAt DateTime  @default(now())
}
